@*Copyright 2015 the pokefans-core authors. See copying.md for legal info.*@
@using Pokefans.Areas.mitarbeit.Models
@model ContentStatisticsViewModel
@{
    SiteTitle = "Verwaltung: Inhalte - Statistiken";
    SiteDescription = "Statistiken";
    SiteHeader = Model.Content.Title;
    Layout = "~/Areas/mitarbeit/Views/_Layout.cshtml";

    Breadcrumbs.Add("Mitarbeit");
    Breadcrumbs.Add("Inhalte");
    Breadcrumbs.Add(Model.Content.Title);
    Breadcrumbs.Add("Statistiken");
}
<div class="row">
    <div class="col-lg-12 col-xs-12">
        <div class="box box-primary">
            <div class="box-body">
                @if (Model.ViewCount > 0)
            {
                    <p>
                        Insgesamt wurden <strong>@Model.ViewCount Aufrufe</strong> dieses Artikels verzeichnet.
                    </p>
                }
                else
                {
                    <p>
                        Es wurden <strong>noch keine Aufrufe</strong> dieses Artikels verzeichnet.
                    </p>
                }
            </div>
        </div>
        @if (Model.ViewCount > 0)
        {
            <div class="box box-primary">
                <div class="box-header">
                    <h3 class="box-title">Entwicklung der Aufrufzahlen</h3>
                </div>
                <div class="box-body">
                    <p>
                        In der linken Spalte siehst du die Verteilung der Aufrufe des Artikels in den letzten 30 Tagen.
                        Die rechte Spalte zeigt dir die Gesamtaufrufe in den letzten 12 Monaten.
                    </p>
                    <div class="row">
                        <div class="col-md-6"><canvas id="lastMonthChart" height="200" width="450"></canvas></div>
                        <div class="col-md-6"><canvas id="last12MonthsChart" height="200" width="450"></canvas></div>
                    </div>
                </div>
            </div>
        }
        @if (Model.TrackerSources.Any())
        {
            <div class="box box-primary">
                <div class="box-header">
                    <h3 class="box-title">Links zu diesem Artikel</h3>
                </div>
                <div class="box-body">
                    <div class="table-responsive">
                        <table class="table table-striped table-hover vertical-center">
                            <tr>
                                <th>Website</th>
                                <th>Klicks</th>
                            </tr>
                            @foreach (var sourceHost in Model.TrackerSources)
                            {
                                <tr>
                                    <td><strong>@sourceHost.Host</strong></td>
                                    <td>@sourceHost.Urls.Sum(x => x.Count)</td>
                                </tr>
                                foreach (var sourceLink in sourceHost.Urls)
                                {
                                    <tr>
                                        <td>@sourceLink.Url</td>
                                        <td>@sourceLink.Count</td>
                                    </tr>
                                }
                            }
                        </table>
                    </div>
                </div>
            </div>
        }
    </div>
</div>
@section ContentSubMenu {
    @Html.Partial("~/Areas/mitarbeit/Views/Shared/_ContentMenuPartial.cshtml", new ContentMenuModel { Active = ContentMenuViewType.Statistics, Id = Model.Content.Id })
}
@section scripts {
    @Scripts.Render("~/bundles/backend")
}
